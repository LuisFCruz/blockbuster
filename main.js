!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/blockbuster/",n(n.s=2)}([function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i={baseUrl:"https://luisfcruz.github.io/blockbuster/"};const r=async e=>(await fetch(e,{method:"GET"})).json(),a=async()=>{try{return await r(`${i.baseUrl}/movies.json`)}catch{return[]}},s=async e=>{try{return await r(`${i.baseUrl}/movies/${e}.json`)}catch{return{}}};class o extends HTMLElement{constructor(e,t){super(),this.router=e,this.movie=t}static get name(){return"b-movie-item"}connectedCallback(){const{title:e,image:t,release:n,rating:i,id:r}=this.movie,[,a]=n.match(/(\d{4})$/),s=`\n      <b-image src="${t}" title="Poster ${e}"></b-image>\n      <div>\n        <h2>\n          <a href="movie/${r}" alt="Acesar ${e}" >${e}</a>\n        </h2>\n        <span>${a}</span>\n        <span>Nota ${i.toLocaleString()}</span>\n      </div>\n    `;this.innerHTML=s,this.querySelector("a").addEventListener("click",this.handlerClick.bind(this),!1)}disconnectedCallback(){this.querySelector("a").removeEventListener("click",this.handlerClick.bind(this),!1)}handlerClick(e){e.preventDefault();const t=e.target.closest("a");this.router.navigateTo(t.href)}}customElements.define(o.name,o);class c extends HTMLElement{constructor(e){super(),this.router=e}static get name(){return"b-home"}async connectedCallback(){(await a()).forEach(e=>this.appendChild(new o(this.router,e)))}}customElements.define(c.name,c);class l extends HTMLElement{constructor(e){super(),this.movieId=e}static get name(){return"b-movie"}async connectedCallback(){const{title:e,originalTitle:t,release:n,genre:i,duration:r,recommended:a,image:o,synopsis:c}=await s(this.movieId),l=`\n      <article>\n        <h2>${e}</h2>\n        <div>\n          <b-image src="${o}" title="Poster ${e}"></b-image>\n          <p>${c}</p>\n        </div>\n        <b-datasheet\n          originalTitle="${t}"\n          release="${n}"\n          genre="${i}"\n          duration="${r}"\n          recommended="${a}"\n        ></b-datasheet>\n      </article>\n    `;this.innerHTML=l}}customElements.define(l.name,l);class d extends HTMLElement{constructor(e){super(),this.router=e}static get name(){return"b-header"}connectedCallback(){this.innerHTML='\n      <header>\n        <a href="/">\n          <h1>\n            Block<span>buster</span>\n          </h1>\n        </a>\n      </header>\n    ',this.querySelector("a").addEventListener("click",this.handlerClick.bind(this),!1)}disconnectedCallback(){this.querySelector("a").removeEventListener("click",this.handlerClick.bind(this),!1)}handlerClick(e){e.preventDefault();const t=e.target.closest("a");this.router.navigateTo(t.href)}}customElements.define(d.name,d);n(0);class u extends HTMLElement{constructor(){super()}static get name(){return"b-image"}connectedCallback(){const e=this.getAttribute("src"),t=this.getAttribute("title"),n=`\n      <figure>\n        <img src="${i.baseUrl}/images/${e}" alt=${t} />\n      </figure>\n    `;this.innerHTML=n}}customElements.define(u.name,u);class h extends HTMLElement{constructor(e){super(),this.movieId=e}static get name(){return"b-datasheet"}async connectedCallback(){const e=this.getAttribute("originalTitle"),t=this.getAttribute("release"),n=this.getAttribute("genre"),i=this.getAttribute("duration"),r=this.getAttribute("recommended"),a=`\n      <section>\n        <h3>Ficha Técnica</h3>\n        <b-datasheet-item label="Título Original" description="${e}" ></b-datasheet-item>\n          <b-datasheet-item label="Data de Lançamento" description="${t}" ></b-datasheet-item>\n          <b-datasheet-item label="Gênero" description="${n}" ></b-datasheet-item>\n          <b-datasheet-item label="Duração" description="${i}" ></b-datasheet-item>\n          <b-datasheet-item\n            label="Recomendação"\n            description="${"L"===r?"Recomendado para todas as idades":`Não recomendado para menores de ${r} anos`}"\n          ></b-datasheet-item>\n      </section>\n    `;this.innerHTML=a}}customElements.define(h.name,h);class m extends HTMLElement{constructor(){super()}static get name(){return"b-datasheet-item"}async connectedCallback(){const e=`\n        <div>\n          <span>${this.getAttribute("label")}:</span> ${this.getAttribute("description")}\n        </div>\n    `;this.innerHTML=e}}customElements.define(m.name,m);const b=new class{constructor(){this.routes=[]}add(e,t){this.routes.push({uri:e,handler:t,rule:this._getRule(e)})}applay(){this.navigateTo("/")}navigateTo(e){var t;t=t=>{window.history.pushState({},"",e),this._handleNavigation(t)},document.body.addEventListener("click",e=>{if(e.defaultPrevented||0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey)return;const n=e.composedPath().filter(e=>"A"===e.tagName)[0];if(!n||n.target||n.hasAttribute("download")||"external"===n.getAttribute("rel"))return;const i=n.href;if(!i||-1!==i.indexOf("mailto:"))return;const r=window.location,a=r.origin||r.protocol+"//"+r.host;0===i.indexOf(a)&&(e.preventDefault(),i!==r.href&&(window.history.pushState({},"",i),t(r,e)))}),window.addEventListener("popstate",e=>t(window.location,e)),t(window.location,null)}_getRule(e){const t=e.replace(/([\/])/g,"\\$1").replace(/\:id/g,"(\\d+)");return new RegExp("^"+t+"$","i")}_handleNavigation({pathname:e}){const t=this.routes.find(t=>this._testRoute(t,e));if(t){const n=this._getParams(t,e);t.handler.apply(null,n)}}_testRoute({rule:e},t){return e.test(t)}_getParams({rule:e},t){const n=t.match(e);if(n)return n.shift(),n}};window.addEventListener("load",()=>{const e=document.querySelector(".container");b.add("/",()=>{e.innerHTML="";const t=new d(b);e.appendChild(t);const n=new c(b);e.appendChild(n)}),b.add("/movie/:id",t=>{e.innerHTML="";const n=new d(b);e.appendChild(n);const i=new l(t);e.appendChild(i)}),b.applay()}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(`${i.baseUrl}/service-worker.js`)})}]);