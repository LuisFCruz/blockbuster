!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/blockbuster/",n(n.s=7)}([function(e,t,n){},function(e,t){class n extends HTMLElement{constructor(){super()}static get name(){return"b-header"}connectedCallback(){this.innerHTML='\n      <header>\n        <a href="">\n          <h1>\n            Block<span>buster</span>\n          </h1>\n        </a>\n      </header>\n    '}}customElements.define(n.name,n)},function(e,t){class n extends HTMLElement{constructor(){super(),this._deferredPrompt}static get name(){return"b-install-app"}connectedCallback(){this.hiddenOptions();this.innerHTML='\n      <section>\n        <strong>Mantenha se atualizado</strong>\n        <p>Nosso app é rápido, pequeno e funciona offline</p>\n        <div>\n          <button id="cancel-install">Não, obrigado</button>\n          <button id="install-app">Aceito</button>\n        </div>\n      </section>\n    ',window.addEventListener("beforeinstallprompt",this.handlerBeforeInstallPrompt.bind(this))}disconnectedCallback(){window.removeEventListener("beforeinstallprompt",this.handlerBeforeInstallPrompt.bind(this)),this.querySelector("#install-app").removeEventListener("click",this.handlerInstallApp.bind(this)),this.querySelector("#cancel-install").removeEventListener("click",this.hiddenOptions.bind(this))}handlerBeforeInstallPrompt(e){this.style.display="block",e.preventDefault(),this._deferredPrompt=e,this.querySelector("#install-app").addEventListener("click",this.handlerInstallApp.bind(this)),this.querySelector("#cancel-install").addEventListener("click",this.hiddenOptions.bind(this))}async handlerInstallApp(){this._deferredPrompt.prompt(),await this._deferredPrompt.userChoice,this.hiddenOptions()}hiddenOptions(){this.style.display="none"}}customElements.define(n.name,n)},function(e,t){class n extends HTMLElement{constructor(){super()}static get name(){return"b-rating"}connectedCallback(){const e=this.getAttribute("value"),t=parseFloat(e),n=`\n      <section>\n        <h3 class="sub-title">Nota</h3>\n        <div>\n          <i class="i-star ${t?"":"empty"}"></i>\n          <span>${t?t.toLocaleString():""}</span>\n          <span>${this.ratingToText(t)}</span>\n        </div>\n      </section>\n    `;this.innerHTML=n}ratingToText(e=0){return["Péssimo","Ruim","Bom","Ótimo","Excelente"][Math.round(e/2)-1]||"Nenhuma avaliação"}}customElements.define(n.name,n)},function(e,t){class n extends HTMLElement{constructor(){super()}static get name(){return"b-not-found"}connectedCallback(){this.innerHTML='\n        <div>\n          <i class="i-sad-face"></i>\n        </div>\n        <p>Ops! Não encontramos o que você esta procurando.</p>\n    '}}customElements.define(n.name,n)},function(e,t){class n extends HTMLElement{constructor(){super()}static get name(){return"b-spinner"}connectedCallback(){this.innerHTML='\n      <div class="spinner-cube">\n        <div class="cube1 cube"></div>\n        <div class="cube2 cube"></div>\n        <div class="cube4 cube"></div>\n        <div class="cube3 cube"></div>\n      </div>\n    '}}customElements.define(n.name,n)},,function(e,t,n){"use strict";n.r(t);var i={baseUrl:"https://luisfcruz.github.io/blockbuster",path:"/blockbuster"};const s=async e=>(await fetch(e,{method:"GET"})).json(),a=async()=>{try{return await s(`${i.baseUrl}/movies.json`)}catch{return null}},r=async e=>{try{return await s(`${i.baseUrl}/movies/${e}.json`)}catch{return null}};class o extends HTMLElement{constructor(e){super(),this.movie=e}static get name(){return"b-movie-item"}connectedCallback(){const{title:e,image:t,release:n,rating:i,id:s,type:a}=this.movie,r=`\n      <b-image src="${t}" title="Poster ${e}"></b-image>\n      <div>\n        <h2>\n          <a href="movie/${s}" alt="Acessar ${e}" >${e}</a>\n        </h2>\n        <span>${this._getReaseYear(n,a)}</span>\n        <span>${i?`Nota ${i.toLocaleString()}`:""}</span>\n      </div>\n    `;this.innerHTML=r}_getReaseYear(e,t){if("F"===t){const[,t]=e.match(/(\d{4})$/);return t}return e}}customElements.define(o.name,o);class c extends HTMLElement{constructor(){super()}static get name(){return"b-home"}async connectedCallback(){this.innerHTML="<b-spinner></b-spinner>";const e=await a();e?(this.innerHTML="",e.forEach(e=>this.appendChild(new o(e)))):this.innerHTML="<b-not-found></b-not-found>"}}customElements.define(c.name,c);class l extends HTMLElement{constructor(e){super(),this.movieId=e}static get name(){return"b-movie"}async connectedCallback(){this.innerHTML="<b-spinner></b-spinner>";const e=await r(this.movieId);if(!e)return void(this.innerHTML="<b-not-found></b-not-found>");const{title:t,originalTitle:n,release:i,image:s,synopsis:a,rating:o,genre:c="",duration:l="",recommended:d="",seasons:u="",episodes:h=""}=e,m=`\n      <article>\n        <h2>${t}</h2>\n        <div>\n          <b-image src="${s}" title="Poster ${t}"></b-image>\n          <p>${a}</p>\n        </div>\n        <b-rating value="${o}"></b-rating>\n        <b-datasheet\n          originalTitle="${n}"\n          release="${i}"\n          genre="${c}"\n          duration="${l}"\n          recommended="${d}"\n          seasons="${u}"\n          episodes="${h}"\n        ></b-datasheet>\n      </article>\n    `;this.innerHTML=m}}customElements.define(l.name,l);n(0),n(1);class d extends HTMLElement{constructor(){super()}static get name(){return"b-image"}connectedCallback(){const e=this.getAttribute("src"),t=this.getAttribute("title"),n=`\n      <figure>\n        <img src="${i.baseUrl}/images/${e}" alt=${t} />\n      </figure>\n    `;this.innerHTML=n}}customElements.define(d.name,d);class u extends HTMLElement{constructor(e){super(),this.movieId=e}static get name(){return"b-datasheet"}async connectedCallback(){const e=this.getAttribute("originalTitle"),t=this.getAttribute("release"),n=this.getAttribute("genre"),i=this.getAttribute("duration"),s=this.getAttribute("recommended"),a=`\n      <section>\n        <h3 class="sub-title">Ficha Técnica</h3>\n          <b-datasheet-item label="Título Original" description="${e}" ></b-datasheet-item>\n          <b-datasheet-item label="Lançamento" description="${t}" ></b-datasheet-item>\n          <b-datasheet-item label="Gênero" description="${n}" ></b-datasheet-item>\n          <b-datasheet-item label="Duração" description="${i}" ></b-datasheet-item>\n          <b-datasheet-item\n            label="Recomendação"\n            description="${"L"===s?"Recomendado para todas as idades":`Não recomendado para menores de ${s} anos`}"\n          ></b-datasheet-item>\n          <b-datasheet-item\n            label="Temporadas"\n            description="${this.getAttribute("seasons")}"\n          ></b-datasheet-item>\n          <b-datasheet-item\n            label="Episódios"\n            description="${this.getAttribute("episodes")}"\n          ></b-datasheet-item>\n      </section>\n    `;this.innerHTML=a}}customElements.define(u.name,u);class h extends HTMLElement{constructor(){super()}static get name(){return"b-datasheet-item"}async connectedCallback(){const e=this.getAttribute("label"),t=this.getAttribute("description");if(t){const n=`\n            <div>\n              <span>${e}:</span> ${t}\n            </div>\n        `;this.innerHTML=n}}}customElements.define(h.name,h);n(2),n(3),n(4),n(5);const m=new class{constructor(){this.routes=[]}add(e,t){const n=this._getPath(e);this.routes.push({uri:n,handler:t,rule:this._getRule(n)})}register(){var e;e=e=>{this._handleNavigation(e)},document.body.addEventListener("click",t=>{if(t.defaultPrevented||0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey)return;const n=t.composedPath().filter(e=>"A"===e.tagName)[0];if(!n||n.target||n.hasAttribute("download")||"external"===n.getAttribute("rel"))return;const i=n.href;if(!i||-1!==i.indexOf("mailto:"))return;const s=window.location,a=s.origin||s.protocol+"//"+s.host;0===i.indexOf(a)&&(t.preventDefault(),i!==s.href&&(window.history.pushState({},"",i),e(s,t)))}),window.addEventListener("popstate",t=>e(window.location,t)),e(window.location,null)}_getPath(e){return`${i.path}${e}`}_getRule(e){const t=e.replace(/([\/])/g,"\\$1").replace(/\:id/g,"(\\d+)");return new RegExp("^"+t+"$","i")}_handleNavigation({pathname:e}){const t=this.routes.find(t=>this._testRoute(t,e));if(t){const n=this._getParams(t,e);t.handler.apply(null,n)}}_testRoute({rule:e},t){return e.test(t)}_getParams({rule:e},t){const n=t.match(e);if(n)return n.shift(),n}};window.addEventListener("load",()=>{const e=document.querySelector(".container");"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js"),m.add("/",()=>{e.innerHTML="";const t=new c;e.appendChild(t)}),m.add("/movie/:id",t=>{e.innerHTML="";const n=new l(t);e.appendChild(n)}),m.register()})}]);